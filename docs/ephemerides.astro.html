<!DOCTYPE html>

<html>
<head>
  <title>ephemerides.astro.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="ephemerides.astro.html">
                ephemerides.astro.js
              </a>
            
              
              <a class="source" href="ephemerides.calendar.calc.html">
                ephemerides.calendar.calc.js
              </a>
            
              
              <a class="source" href="ephemerides.calendar.constants.html">
                ephemerides.calendar.constants.js
              </a>
            
              
              <a class="source" href="ephemerides.calendar.html">
                ephemerides.calendar.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>ephemerides.astro.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="keyword">var</span> Ephemerides = (<span class="keyword">function</span>(exports) {
  <span class="string">"use strict"</span>;

  exports.astro = exports.astro || {};
  <span class="keyword">var</span> astro = exports.astro;</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h2>astro.constants</h2>

            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>  astro.constants = {</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p><em>Julian day of J2000 epoch</em></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    J2000: <span class="number">2451545.0</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p><em>Days in Julian century</em></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    JULIAN_CENTURY: <span class="number">36525.0</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p><em>Days in Julian millennium</em></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    JULIAN_MILLENIUM: (<span class="number">36525.0</span> * <span class="number">10</span>),</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p><em>Astronomical unit in kilometres</em></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    ASTRONOMICAL_UNIT: <span class="number">149597870.0</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p><em>Mean solar tropical year</em></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    TROPICAL_YEAR: <span class="number">365.24219878</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p><em>Weekdays</em></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    WEEKDAYS: [<span class="string">"Sunday"</span>, <span class="string">"Monday"</span>, <span class="string">"Tuesday"</span>, <span class="string">"Wednesday"</span>, <span class="string">"Thursday"</span>, <span class="string">"Friday"</span>, <span class="string">"Saturday"</span>],</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p><em>Terms used in calculating the obliquity of the ecliptic</em>
from <strong>Astronomy and Astrophysics</strong>, Vol 157, p68 (1986),
<em>New Formulas for the Precession, Valid Over 10000 years</em>, Table 8.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    O_TERMS: [-<span class="number">4680.93</span>, -<span class="number">1.55</span>, <span class="number">1999.25</span>, -<span class="number">51.38</span>, -<span class="number">249.67</span>, -<span class="number">39.05</span>, <span class="number">7.12</span>, <span class="number">27.87</span>, <span class="number">5.79</span>, <span class="number">2.45</span>],</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Periodic terms for nutation in longiude (delta \Psi) and
obliquity (delta \Epsilon) as given in table 21.A of
<em>Meeus, <strong>Astronomical Algorithms</strong>, first edition</em>.</p>
<p><em>Argument of Multiple</em></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    NUT_ARG_MULT: [
       <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">1</span>,
      -<span class="number">2</span>,  <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">2</span>,  <span class="number">2</span>,
       <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">2</span>,  <span class="number">2</span>,
       <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">2</span>,
       <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">0</span>,
       <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">0</span>,  <span class="number">0</span>,
      -<span class="number">2</span>,  <span class="number">1</span>,  <span class="number">0</span>,  <span class="number">2</span>,  <span class="number">2</span>,
       <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">2</span>,  <span class="number">1</span>,
       <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">2</span>,
      -<span class="number">2</span>, -<span class="number">1</span>,  <span class="number">0</span>,  <span class="number">2</span>,  <span class="number">2</span>,
      -<span class="number">2</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">0</span>,  <span class="number">0</span>,
      -<span class="number">2</span>,  <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">2</span>,  <span class="number">1</span>,
       <span class="number">0</span>,  <span class="number">0</span>, -<span class="number">1</span>,  <span class="number">2</span>,  <span class="number">2</span>,
       <span class="number">2</span>,  <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">0</span>,
       <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">0</span>,  <span class="number">1</span>,
       <span class="number">2</span>,  <span class="number">0</span>, -<span class="number">1</span>,  <span class="number">2</span>,  <span class="number">2</span>,
       <span class="number">0</span>,  <span class="number">0</span>, -<span class="number">1</span>,  <span class="number">0</span>,  <span class="number">1</span>,
       <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">1</span>,
      -<span class="number">2</span>,  <span class="number">0</span>,  <span class="number">2</span>,  <span class="number">0</span>,  <span class="number">0</span>,
       <span class="number">0</span>,  <span class="number">0</span>, -<span class="number">2</span>,  <span class="number">2</span>,  <span class="number">1</span>,
       <span class="number">2</span>,  <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">2</span>,  <span class="number">2</span>,
       <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">2</span>,  <span class="number">2</span>,  <span class="number">2</span>,
       <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">2</span>,  <span class="number">0</span>,  <span class="number">0</span>,
      -<span class="number">2</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">2</span>,
       <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">2</span>,  <span class="number">0</span>,
      -<span class="number">2</span>,  <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">2</span>,  <span class="number">0</span>,
       <span class="number">0</span>,  <span class="number">0</span>, -<span class="number">1</span>,  <span class="number">2</span>,  <span class="number">1</span>,
       <span class="number">0</span>,  <span class="number">2</span>,  <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">0</span>,
       <span class="number">2</span>,  <span class="number">0</span>, -<span class="number">1</span>,  <span class="number">0</span>,  <span class="number">1</span>,
      -<span class="number">2</span>,  <span class="number">2</span>,  <span class="number">0</span>,  <span class="number">2</span>,  <span class="number">2</span>,
       <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">1</span>,
      -<span class="number">2</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">0</span>,  <span class="number">1</span>,
       <span class="number">0</span>, -<span class="number">1</span>,  <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">1</span>,
       <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">2</span>, -<span class="number">2</span>,  <span class="number">0</span>,
       <span class="number">2</span>,  <span class="number">0</span>, -<span class="number">1</span>,  <span class="number">2</span>,  <span class="number">1</span>,
       <span class="number">2</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">2</span>,
       <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">0</span>,  <span class="number">2</span>,  <span class="number">2</span>,
      -<span class="number">2</span>,  <span class="number">1</span>,  <span class="number">1</span>,  <span class="number">0</span>,  <span class="number">0</span>,
       <span class="number">0</span>, -<span class="number">1</span>,  <span class="number">0</span>,  <span class="number">2</span>,  <span class="number">2</span>,
       <span class="number">2</span>,  <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">2</span>,  <span class="number">1</span>,
       <span class="number">2</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">0</span>,  <span class="number">0</span>,
      -<span class="number">2</span>,  <span class="number">0</span>,  <span class="number">2</span>,  <span class="number">2</span>,  <span class="number">2</span>,
      -<span class="number">2</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">1</span>,
       <span class="number">2</span>,  <span class="number">0</span>, -<span class="number">2</span>,  <span class="number">0</span>,  <span class="number">1</span>,
       <span class="number">2</span>,  <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">1</span>,
       <span class="number">0</span>, -<span class="number">1</span>,  <span class="number">1</span>,  <span class="number">0</span>,  <span class="number">0</span>,
      -<span class="number">2</span>, -<span class="number">1</span>,  <span class="number">0</span>,  <span class="number">2</span>,  <span class="number">1</span>,
      -<span class="number">2</span>,  <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">1</span>,
       <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">2</span>,  <span class="number">2</span>,  <span class="number">1</span>,
      -<span class="number">2</span>,  <span class="number">0</span>,  <span class="number">2</span>,  <span class="number">0</span>,  <span class="number">1</span>,
      -<span class="number">2</span>,  <span class="number">1</span>,  <span class="number">0</span>,  <span class="number">2</span>,  <span class="number">1</span>,
       <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">1</span>, -<span class="number">2</span>,  <span class="number">0</span>,
      -<span class="number">1</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">0</span>,  <span class="number">0</span>,
      -<span class="number">2</span>,  <span class="number">1</span>,  <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">0</span>,
       <span class="number">1</span>,  <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">0</span>,
       <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">0</span>,
      -<span class="number">1</span>, -<span class="number">1</span>,  <span class="number">1</span>,  <span class="number">0</span>,  <span class="number">0</span>,
       <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">1</span>,  <span class="number">0</span>,  <span class="number">0</span>,
       <span class="number">0</span>, -<span class="number">1</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">2</span>,
       <span class="number">2</span>, -<span class="number">1</span>, -<span class="number">1</span>,  <span class="number">2</span>,  <span class="number">2</span>,
       <span class="number">0</span>,  <span class="number">0</span>, -<span class="number">2</span>,  <span class="number">2</span>,  <span class="number">2</span>,
       <span class="number">0</span>,  <span class="number">0</span>,  <span class="number">3</span>,  <span class="number">2</span>,  <span class="number">2</span>,
       <span class="number">2</span>, -<span class="number">1</span>,  <span class="number">0</span>,  <span class="number">2</span>,  <span class="number">2</span>
    ],</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p><em>Coefficient of the sine of the argument</em>
and <em>Coefficient of the cosine of the argument</em></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    NUT_ARG_COEFF: [
      -<span class="number">171996</span>,   -<span class="number">1742</span>,   <span class="number">92095</span>,      <span class="number">89</span>, <span class="comment">//  0,  0,  0,  0,  1</span>
       -<span class="number">13187</span>,     -<span class="number">16</span>,    <span class="number">5736</span>,     -<span class="number">31</span>, <span class="comment">// -2,  0,  0,  2,  2</span>
        -<span class="number">2274</span>,      -<span class="number">2</span>,     <span class="number">977</span>,      -<span class="number">5</span>, <span class="comment">//  0,  0,  0,  2,  2</span>
         <span class="number">2062</span>,       <span class="number">2</span>,    -<span class="number">895</span>,       <span class="number">5</span>, <span class="comment">//  0,  0,  0,  0,  2</span>
         <span class="number">1426</span>,     -<span class="number">34</span>,      <span class="number">54</span>,      -<span class="number">1</span>, <span class="comment">//  0,  1,  0,  0,  0</span>
          <span class="number">712</span>,       <span class="number">1</span>,      -<span class="number">7</span>,       <span class="number">0</span>, <span class="comment">//  0,  0,  1,  0,  0</span>
         -<span class="number">517</span>,      <span class="number">12</span>,     <span class="number">224</span>,      -<span class="number">6</span>, <span class="comment">// -2,  1,  0,  2,  2</span>
         -<span class="number">386</span>,      -<span class="number">4</span>,     <span class="number">200</span>,       <span class="number">0</span>, <span class="comment">//  0,  0,  0,  2,  1</span>
         -<span class="number">301</span>,       <span class="number">0</span>,     <span class="number">129</span>,      -<span class="number">1</span>, <span class="comment">//  0,  0,  1,  2,  2</span>
          <span class="number">217</span>,      -<span class="number">5</span>,     -<span class="number">95</span>,       <span class="number">3</span>, <span class="comment">// -2, -1,  0,  2,  2</span>
         -<span class="number">158</span>,       <span class="number">0</span>,       <span class="number">0</span>,       <span class="number">0</span>, <span class="comment">// -2,  0,  1,  0,  0</span>
          <span class="number">129</span>,       <span class="number">1</span>,     -<span class="number">70</span>,       <span class="number">0</span>, <span class="comment">// -2,  0,  0,  2,  1</span>
          <span class="number">123</span>,       <span class="number">0</span>,     -<span class="number">53</span>,       <span class="number">0</span>, <span class="comment">//  0,  0, -1,  2,  2</span>
           <span class="number">63</span>,       <span class="number">0</span>,       <span class="number">0</span>,       <span class="number">0</span>, <span class="comment">//  2,  0,  0,  0,  0</span>
           <span class="number">63</span>,       <span class="number">1</span>,     -<span class="number">33</span>,       <span class="number">0</span>, <span class="comment">//  0,  0,  1,  0,  1</span>
          -<span class="number">59</span>,       <span class="number">0</span>,      <span class="number">26</span>,       <span class="number">0</span>, <span class="comment">//  2,  0, -1,  2,  2</span>
          -<span class="number">58</span>,      -<span class="number">1</span>,      <span class="number">32</span>,       <span class="number">0</span>, <span class="comment">//  0,  0, -1,  0,  1</span>
          -<span class="number">51</span>,       <span class="number">0</span>,      <span class="number">27</span>,       <span class="number">0</span>, <span class="comment">//  0,  0,  1,  2,  1</span>
           <span class="number">48</span>,       <span class="number">0</span>,       <span class="number">0</span>,       <span class="number">0</span>, <span class="comment">// -2,  0,  2,  0,  0</span>
           <span class="number">46</span>,       <span class="number">0</span>,     -<span class="number">24</span>,       <span class="number">0</span>, <span class="comment">//  0,  0, -2,  2,  1</span>
          -<span class="number">38</span>,       <span class="number">0</span>,      <span class="number">16</span>,       <span class="number">0</span>, <span class="comment">//  2,  0,  0,  2,  2</span>
          -<span class="number">31</span>,       <span class="number">0</span>,      <span class="number">13</span>,       <span class="number">0</span>, <span class="comment">//  0,  0,  2,  2,  2</span>
           <span class="number">29</span>,       <span class="number">0</span>,       <span class="number">0</span>,       <span class="number">0</span>, <span class="comment">//  0,  0,  2,  0,  0</span>
           <span class="number">29</span>,       <span class="number">0</span>,     -<span class="number">12</span>,       <span class="number">0</span>, <span class="comment">// -2,  0,  1,  2,  2</span>
           <span class="number">26</span>,       <span class="number">0</span>,       <span class="number">0</span>,       <span class="number">0</span>, <span class="comment">//  0,  0,  0,  2,  0</span>
          -<span class="number">22</span>,       <span class="number">0</span>,       <span class="number">0</span>,       <span class="number">0</span>, <span class="comment">// -2,  0,  0,  2,  0</span>
           <span class="number">21</span>,       <span class="number">0</span>,     -<span class="number">10</span>,       <span class="number">0</span>, <span class="comment">//  0,  0, -1,  2,  1</span>
           <span class="number">17</span>,      -<span class="number">1</span>,       <span class="number">0</span>,       <span class="number">0</span>, <span class="comment">//  0,  2,  0,  0,  0</span>
           <span class="number">16</span>,       <span class="number">0</span>,      -<span class="number">8</span>,       <span class="number">0</span>, <span class="comment">//  2,  0, -1,  0,  1</span>
          -<span class="number">16</span>,       <span class="number">1</span>,       <span class="number">7</span>,       <span class="number">0</span>, <span class="comment">// -2,  2,  0,  2,  2</span>
          -<span class="number">15</span>,       <span class="number">0</span>,       <span class="number">9</span>,       <span class="number">0</span>, <span class="comment">//  0,  1,  0,  0,  1</span>
          -<span class="number">13</span>,       <span class="number">0</span>,       <span class="number">7</span>,       <span class="number">0</span>, <span class="comment">// -2,  0,  1,  0,  1</span>
          -<span class="number">12</span>,       <span class="number">0</span>,       <span class="number">6</span>,       <span class="number">0</span>, <span class="comment">//  0, -1,  0,  0,  1</span>
           <span class="number">11</span>,       <span class="number">0</span>,       <span class="number">0</span>,       <span class="number">0</span>, <span class="comment">//  0,  0,  2, -2,  0</span>
          -<span class="number">10</span>,       <span class="number">0</span>,       <span class="number">5</span>,       <span class="number">0</span>, <span class="comment">//  2,  0, -1,  2,  1</span>
           -<span class="number">8</span>,       <span class="number">0</span>,       <span class="number">3</span>,       <span class="number">0</span>, <span class="comment">//  2,  0,  1,  2,  2</span>
            <span class="number">7</span>,       <span class="number">0</span>,      -<span class="number">3</span>,       <span class="number">0</span>, <span class="comment">//  0,  1,  0,  2,  2</span>
           -<span class="number">7</span>,       <span class="number">0</span>,       <span class="number">0</span>,       <span class="number">0</span>, <span class="comment">// -2,  1,  1,  0,  0</span>
           -<span class="number">7</span>,       <span class="number">0</span>,       <span class="number">3</span>,       <span class="number">0</span>, <span class="comment">//  0, -1,  0,  2,  2</span>
           -<span class="number">7</span>,       <span class="number">0</span>,       <span class="number">3</span>,       <span class="number">0</span>, <span class="comment">//  2,  0,  0,  2,  1</span>
            <span class="number">6</span>,       <span class="number">0</span>,       <span class="number">0</span>,       <span class="number">0</span>, <span class="comment">//  2,  0,  1,  0,  0</span>
            <span class="number">6</span>,       <span class="number">0</span>,      -<span class="number">3</span>,       <span class="number">0</span>, <span class="comment">// -2,  0,  2,  2,  2</span>
            <span class="number">6</span>,       <span class="number">0</span>,      -<span class="number">3</span>,       <span class="number">0</span>, <span class="comment">// -2,  0,  1,  2,  1</span>
           -<span class="number">6</span>,       <span class="number">0</span>,       <span class="number">3</span>,       <span class="number">0</span>, <span class="comment">//  2,  0, -2,  0,  1</span>
           -<span class="number">6</span>,       <span class="number">0</span>,       <span class="number">3</span>,       <span class="number">0</span>, <span class="comment">//  2,  0,  0,  0,  1</span>
            <span class="number">5</span>,       <span class="number">0</span>,       <span class="number">0</span>,       <span class="number">0</span>, <span class="comment">//  0, -1,  1,  0,  0</span>
           -<span class="number">5</span>,       <span class="number">0</span>,       <span class="number">3</span>,       <span class="number">0</span>, <span class="comment">// -2, -1,  0,  2,  1</span>
           -<span class="number">5</span>,       <span class="number">0</span>,       <span class="number">3</span>,       <span class="number">0</span>, <span class="comment">// -2,  0,  0,  0,  1</span>
           -<span class="number">5</span>,       <span class="number">0</span>,       <span class="number">3</span>,       <span class="number">0</span>, <span class="comment">//  0,  0,  2,  2,  1</span>
            <span class="number">4</span>,       <span class="number">0</span>,       <span class="number">0</span>,       <span class="number">0</span>, <span class="comment">// -2,  0,  2,  0,  1</span>
            <span class="number">4</span>,       <span class="number">0</span>,       <span class="number">0</span>,       <span class="number">0</span>, <span class="comment">// -2,  1,  0,  2,  1</span>
            <span class="number">4</span>,       <span class="number">0</span>,       <span class="number">0</span>,       <span class="number">0</span>, <span class="comment">//  0,  0,  1, -2,  0</span>
           -<span class="number">4</span>,       <span class="number">0</span>,       <span class="number">0</span>,       <span class="number">0</span>, <span class="comment">// -1,  0,  1,  0,  0</span>
           -<span class="number">4</span>,       <span class="number">0</span>,       <span class="number">0</span>,       <span class="number">0</span>, <span class="comment">// -2,  1,  0,  0,  0</span>
           -<span class="number">4</span>,       <span class="number">0</span>,       <span class="number">0</span>,       <span class="number">0</span>, <span class="comment">//  1,  0,  0,  0,  0</span>
            <span class="number">3</span>,       <span class="number">0</span>,       <span class="number">0</span>,       <span class="number">0</span>, <span class="comment">//  0,  0,  1,  2,  0</span>
           -<span class="number">3</span>,       <span class="number">0</span>,       <span class="number">0</span>,       <span class="number">0</span>, <span class="comment">// -1, -1,  1,  0,  0</span>
           -<span class="number">3</span>,       <span class="number">0</span>,       <span class="number">0</span>,       <span class="number">0</span>, <span class="comment">//  0,  1,  1,  0,  0</span>
           -<span class="number">3</span>,       <span class="number">0</span>,       <span class="number">0</span>,       <span class="number">0</span>, <span class="comment">//  0, -1,  1,  2,  2</span>
           -<span class="number">3</span>,       <span class="number">0</span>,       <span class="number">0</span>,       <span class="number">0</span>, <span class="comment">//  2, -1, -1,  2,  2</span>
           -<span class="number">3</span>,       <span class="number">0</span>,       <span class="number">0</span>,       <span class="number">0</span>, <span class="comment">//  0,  0, -2,  2,  2</span>
           -<span class="number">3</span>,       <span class="number">0</span>,       <span class="number">0</span>,       <span class="number">0</span>, <span class="comment">//  0,  0,  3,  2,  2</span>
           -<span class="number">3</span>,       <span class="number">0</span>,       <span class="number">0</span>,       <span class="number">0</span>  <span class="comment">//  2, -1,  0,  2,  2</span>
    ],</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p><em>Table of observed Delta T values at the beginning of
even numbered years from 1620 through 2002.</em></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    DELTA_T_TAB: [
      <span class="number">121</span>, <span class="number">112</span>, <span class="number">103</span>, <span class="number">95</span>, <span class="number">88</span>, <span class="number">82</span>, <span class="number">77</span>, <span class="number">72</span>, <span class="number">68</span>, <span class="number">63</span>, <span class="number">60</span>, <span class="number">56</span>,
      <span class="number">53</span>, <span class="number">51</span>, <span class="number">48</span>, <span class="number">46</span>, <span class="number">44</span>, <span class="number">42</span>, <span class="number">40</span>, <span class="number">38</span>, <span class="number">35</span>, <span class="number">33</span>, <span class="number">31</span>, <span class="number">29</span>,
      <span class="number">26</span>, <span class="number">24</span>, <span class="number">22</span>, <span class="number">20</span>, <span class="number">18</span>, <span class="number">16</span>, <span class="number">14</span>, <span class="number">12</span>, <span class="number">11</span>, <span class="number">10</span>, <span class="number">9</span>, <span class="number">8</span>,
      <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">9</span>, <span class="number">9</span>, <span class="number">9</span>,
      <span class="number">9</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">11</span>, <span class="number">11</span>,
      <span class="number">11</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">13</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">14</span>, <span class="number">14</span>,
      <span class="number">14</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">16</span>, <span class="number">16</span>, <span class="number">16</span>, <span class="number">16</span>, <span class="number">16</span>,
      <span class="number">16</span>, <span class="number">16</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">14</span>, <span class="number">13</span>, <span class="number">13.1</span>, <span class="number">12.5</span>, <span class="number">12.2</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>,
      <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">11.9</span>, <span class="number">11.6</span>, <span class="number">11</span>, <span class="number">10.2</span>, <span class="number">9.2</span>, <span class="number">8.2</span>, <span class="number">7.1</span>, <span class="number">6.2</span>, <span class="number">5.6</span>,
      <span class="number">5.4</span>, <span class="number">5.3</span>, <span class="number">5.4</span>, <span class="number">5.6</span>, <span class="number">5.9</span>, <span class="number">6.2</span>, <span class="number">6.5</span>, <span class="number">6.8</span>, <span class="number">7.1</span>, <span class="number">7.3</span>, <span class="number">7.5</span>, <span class="number">7.6</span>,
      <span class="number">7.7</span>, <span class="number">7.3</span>, <span class="number">6.2</span>, <span class="number">5.2</span>, <span class="number">2.7</span>, <span class="number">1.4</span>, -<span class="number">1.2</span>, -<span class="number">2.8</span>, -<span class="number">3.8</span>, -<span class="number">4.8</span>, -<span class="number">5.5</span>, -<span class="number">5.3</span>,
      -<span class="number">5.6</span>, -<span class="number">5.7</span>, -<span class="number">5.9</span>, -<span class="number">6</span>, -<span class="number">6.3</span>, -<span class="number">6.5</span>, -<span class="number">6.2</span>, -<span class="number">4.7</span>, -<span class="number">2.8</span>, -<span class="number">0.1</span>, <span class="number">2.6</span>, <span class="number">5.3</span>,
      <span class="number">7.7</span>, <span class="number">10.4</span>, <span class="number">13.3</span>, <span class="number">16</span>, <span class="number">18.2</span>, <span class="number">20.2</span>, <span class="number">21.1</span>, <span class="number">22.4</span>, <span class="number">23.5</span>, <span class="number">23.8</span>, <span class="number">24.3</span>, <span class="number">24</span>,
      <span class="number">23.9</span>, <span class="number">23.9</span>, <span class="number">23.7</span>, <span class="number">24</span>, <span class="number">24.3</span>, <span class="number">25.3</span>, <span class="number">26.2</span>, <span class="number">27.3</span>, <span class="number">28.2</span>, <span class="number">29.1</span>, <span class="number">30</span>, <span class="number">30.7</span>,
      <span class="number">31.4</span>, <span class="number">32.2</span>, <span class="number">33.1</span>, <span class="number">34</span>, <span class="number">35</span>, <span class="number">36.5</span>, <span class="number">38.3</span>, <span class="number">40.2</span>, <span class="number">42.2</span>, <span class="number">44.5</span>, <span class="number">46.5</span>, <span class="number">48.5</span>,
      <span class="number">50.5</span>, <span class="number">52.2</span>, <span class="number">53.8</span>, <span class="number">54.9</span>, <span class="number">55.8</span>, <span class="number">56.9</span>, <span class="number">58.3</span>, <span class="number">60</span>, <span class="number">61.6</span>, <span class="number">63</span>, <span class="number">65</span>, <span class="number">66.6</span>
    ],</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p><em>Periodic terms to obtain true time</em></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    EQUINOX_P_TERMS: [
      <span class="number">485</span>, <span class="number">324.96</span>,   <span class="number">1934.136</span>,
      <span class="number">203</span>, <span class="number">337.23</span>,  <span class="number">32964.467</span>,
      <span class="number">199</span>, <span class="number">342.08</span>,     <span class="number">20.186</span>,
      <span class="number">182</span>,  <span class="number">27.85</span>, <span class="number">445267.112</span>,
      <span class="number">156</span>,  <span class="number">73.14</span>,  <span class="number">45036.886</span>,
      <span class="number">136</span>, <span class="number">171.52</span>,  <span class="number">22518.443</span>,
       <span class="number">77</span>, <span class="number">222.54</span>,  <span class="number">65928.934</span>,
       <span class="number">74</span>, <span class="number">296.72</span>,   <span class="number">3034.906</span>,
       <span class="number">70</span>, <span class="number">243.58</span>,   <span class="number">9037.513</span>,
       <span class="number">58</span>, <span class="number">119.81</span>,  <span class="number">33718.147</span>,
       <span class="number">52</span>, <span class="number">297.17</span>,    <span class="number">150.678</span>,
       <span class="number">50</span>,  <span class="number">21.02</span>,   <span class="number">2281.226</span>,
       <span class="number">45</span>, <span class="number">247.54</span>,  <span class="number">29929.562</span>,
       <span class="number">44</span>, <span class="number">325.15</span>,  <span class="number">31555.956</span>,
       <span class="number">29</span>,  <span class="number">60.93</span>,   <span class="number">4443.417</span>,
       <span class="number">18</span>, <span class="number">155.12</span>,  <span class="number">67555.328</span>,
       <span class="number">17</span>, <span class="number">288.79</span>,   <span class="number">4562.452</span>,
       <span class="number">16</span>, <span class="number">198.04</span>,  <span class="number">62894.029</span>,
       <span class="number">14</span>, <span class="number">199.76</span>,  <span class="number">31436.921</span>,
       <span class="number">12</span>,  <span class="number">95.39</span>,  <span class="number">14577.848</span>,
       <span class="number">12</span>, <span class="number">287.11</span>,  <span class="number">31931.756</span>,
       <span class="number">12</span>, <span class="number">320.81</span>,  <span class="number">34777.259</span>,
        <span class="number">9</span>, <span class="number">227.73</span>,   <span class="number">1222.114</span>,
        <span class="number">8</span>,  <span class="number">15.45</span>,  <span class="number">16859.074</span>
    ],

    JDE0_TAB_1000: [
      [<span class="number">1721139.29189</span>, <span class="number">365242.13740</span>,  <span class="number">0.06134</span>,  <span class="number">0.00111</span>, -<span class="number">0.00071</span>],
      [<span class="number">1721233.25401</span>, <span class="number">365241.72562</span>, -<span class="number">0.05323</span>,  <span class="number">0.00907</span>,  <span class="number">0.00025</span>],
      [<span class="number">1721325.70455</span>, <span class="number">365242.49558</span>, -<span class="number">0.11677</span>, -<span class="number">0.00297</span>,  <span class="number">0.00074</span>],
      [<span class="number">1721414.39987</span>, <span class="number">365242.88257</span>, -<span class="number">0.00769</span>, -<span class="number">0.00933</span>, -<span class="number">0.00006</span>]
    ],

    JDE0_TAB_2000: [
      [<span class="number">2451623.80984</span>, <span class="number">365242.37404</span>,  <span class="number">0.05169</span>, -<span class="number">0.00411</span>, -<span class="number">0.00057</span>],
      [<span class="number">2451716.56767</span>, <span class="number">365241.62603</span>,  <span class="number">0.00325</span>,  <span class="number">0.00888</span>, -<span class="number">0.00030</span>],
      [<span class="number">2451810.21715</span>, <span class="number">365242.01767</span>, -<span class="number">0.11575</span>,  <span class="number">0.00337</span>,  <span class="number">0.00078</span>],
      [<span class="number">2451900.05952</span>, <span class="number">365242.74049</span>, -<span class="number">0.06223</span>, -<span class="number">0.00823</span>,  <span class="number">0.00032</span>]
    ]
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <h2>astro Functions</h2>

            </div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Arc-seconds to radians</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  astro.astor = <span class="keyword">function</span>(a) {
    <span class="keyword">return</span> a * (Math.PI / (<span class="number">180.0</span> * <span class="number">3600.0</span>));
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Degrees to radians</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  astro.dtr = <span class="keyword">function</span>(d) {
    <span class="keyword">return</span> (d * Math.PI) / <span class="number">180.0</span>;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Radians to degrees</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  astro.rtd = <span class="keyword">function</span>(r) {
    <span class="keyword">return</span> (r * <span class="number">180.0</span>) / Math.PI;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Range reduce angle in degrees</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  astro.fixangle = <span class="keyword">function</span>(a) {
    <span class="keyword">return</span> a - <span class="number">360.0</span> * (Math.floor(a / <span class="number">360.0</span>));
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>Range reduce angle in radians</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  astro.fixangr = <span class="keyword">function</span>(a) {
    <span class="keyword">return</span> a - (<span class="number">2</span> * Math.PI) * (Math.floor(a / (<span class="number">2</span> * Math.PI)));
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>Sine of an angle in degrees</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  astro.dsin = <span class="keyword">function</span>(d) {
    <span class="keyword">return</span> Math.sin(<span class="keyword">this</span>.dtr(d));
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>Cosine of an angle in degrees</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  astro.dcos = <span class="keyword">function</span>(d) {
    <span class="keyword">return</span> Math.cos(<span class="keyword">this</span>.dtr(d));
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>Modulus function which works for non-integers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  astro.mod = <span class="keyword">function</span>(a, b) {
    <span class="keyword">return</span> a - (b * Math.floor(a / b));
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>Modulus function which returns numerator if modulus is zero</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  astro.amod = <span class="keyword">function</span>(a, b) {
    <span class="keyword">return</span> <span class="keyword">this</span>.mod(a - <span class="number">1</span>, b) + <span class="number">1</span>;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>Convert Julian time to hour, minutes, and seconds,
returned as a three-element array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  astro.jhms = <span class="keyword">function</span>(j) {
    <span class="keyword">var</span> ij;</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Astronomical to civil</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    j += <span class="number">0.5</span>;

    ij = ((j - Math.floor(j)) * <span class="number">86400.0</span>) + <span class="number">0.5</span>;

    <span class="keyword">return</span> [
      Math.floor(ij / <span class="number">3600</span>),
      Math.floor((ij / <span class="number">60</span>) % <span class="number">60</span>),
      Math.floor(ij % <span class="number">60</span>)
    ];
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>Calculate day of week from Julian day</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  astro.jwday = <span class="keyword">function</span>(j) {
    <span class="keyword">return</span> <span class="keyword">this</span>.mod(Math.floor((j + <span class="number">1.5</span>)), <span class="number">7</span>);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Calculate the obliquity of the ecliptic for a given
Julian date. This uses Laskar&#39;s tenth-degree
polynomial fit (<em>J. Laskar, <strong>Astronomy and
Astrophysics</strong>, Vol. 157, page 68 [1986]</em>) which is
accurate to within 0.01 arc second between AD 1000
and AD 3000, and within a few seconds of arc for
+/-10000 years around AD 2000. If we&#39;re outside the
range in which this fit is valid (deep time) we
simply return the J2000 value of the obliquity, which
happens to be almost precisely the mean.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  astro.obliqeq = <span class="keyword">function</span>(jd) {
    <span class="keyword">var</span> eps, u, v, i;

    v = u = (jd - <span class="keyword">this</span>.constants.J2000) / (<span class="keyword">this</span>.constants.JULIAN_CENTURY * <span class="number">100</span>);

    eps = <span class="number">23</span> + (<span class="number">26</span> / <span class="number">60.0</span>) + (<span class="number">21.448</span> / <span class="number">3600.0</span>);

    <span class="keyword">if</span> (Math.abs(u) &lt; <span class="number">1.0</span>) {
      <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) {
        eps += (<span class="keyword">this</span>.constants.O_TERMS[i] / <span class="number">3600.0</span>) * v;
        v *= u;
      }
    }

    <span class="keyword">return</span> eps;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>Calculate the nutation in longitude, deltaPsi, and
obliquity, deltaEpsilon for a given Julian date
jd. Results are returned as a two element Array
giving <code>[deltaPsi, deltaEpsilon]</code> in degrees.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  astro.nutation = <span class="keyword">function</span>(jd) {
    <span class="keyword">var</span> deltaPsi, deltaEpsilon,
      i, j,
      t = (jd - <span class="number">2451545.0</span>) / <span class="number">36525.0</span>,
      t2, t3, to10,
      ta = [],
      dp = <span class="number">0</span>,
      de = <span class="number">0</span>,
      ang;

    t3 = t * (t2 = t * t);</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>Calculate angles. The correspondence between the elements
of our array and the terms cited in <em>Meeus</em> are:</p>
<p><code>ta[0] = D  ta[0] = M  ta[2] = M&#39;  ta[3] = F  ta[4] = \Omega</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    ta[<span class="number">0</span>] = <span class="keyword">this</span>.dtr(<span class="number">297.850363</span> + <span class="number">445267.11148</span> * t - <span class="number">0.0019142</span> * t2 +
      t3 / <span class="number">189474.0</span>);
    ta[<span class="number">1</span>] = <span class="keyword">this</span>.dtr(<span class="number">357.52772</span> + <span class="number">35999.05034</span> * t - <span class="number">0.0001603</span> * t2 -
      t3 / <span class="number">300000.0</span>);
    ta[<span class="number">2</span>] = <span class="keyword">this</span>.dtr(<span class="number">134.96298</span> + <span class="number">477198.867398</span> * t + <span class="number">0.0086972</span> * t2 +
      t3 / <span class="number">56250.0</span>);
    ta[<span class="number">3</span>] = <span class="keyword">this</span>.dtr(<span class="number">93.27191</span> + <span class="number">483202.017538</span> * t - <span class="number">0.0036825</span> * t2 +
      t3 / <span class="number">327270</span>);
    ta[<span class="number">4</span>] = <span class="keyword">this</span>.dtr(<span class="number">125.04452</span> - <span class="number">1934.136261</span> * t + <span class="number">0.0020708</span> * t2 +
      t3 / <span class="number">450000.0</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>Range reduce the angles in case the sine and cosine functions
don&#39;t do it as accurately or quickly.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) {
      ta[i] = <span class="keyword">this</span>.fixangr(ta[i]);
    }

    to10 = t / <span class="number">10.0</span>;

    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">63</span>; i++) {
      ang = <span class="number">0</span>;

      <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; <span class="number">5</span>; j++) {
        <span class="keyword">if</span> (<span class="keyword">this</span>.constants.NUT_ARG_MULT[(i * <span class="number">5</span>) + j] != <span class="number">0</span>) {
          ang += <span class="keyword">this</span>.constants.NUT_ARG_MULT[(i * <span class="number">5</span>) + j] * ta[j];
        }
      }

      dp += (<span class="keyword">this</span>.constants.NUT_ARG_COEFF[(i * <span class="number">4</span>) + <span class="number">0</span>] + <span class="keyword">this</span>.constants.NUT_ARG_COEFF[(i * <span class="number">4</span>) + <span class="number">1</span>] * to10) * Math.sin(ang);
      de += (<span class="keyword">this</span>.constants.NUT_ARG_COEFF[(i * <span class="number">4</span>) + <span class="number">2</span>] + <span class="keyword">this</span>.constants.NUT_ARG_COEFF[(i * <span class="number">4</span>) + <span class="number">3</span>] * to10) * Math.cos(ang);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>Return the result, converting from ten thousandths of arc
seconds to radians in the process.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    deltaPsi     = dp / (<span class="number">3600.0</span> * <span class="number">10000.0</span>);
    deltaEpsilon = de / (<span class="number">3600.0</span> * <span class="number">10000.0</span>);

    <span class="keyword">return</span> [deltaPsi, deltaEpsilon];
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>Convert celestial (ecliptical) longitude and
latitude into right ascension (in degrees) and
declination. We must supply the time of the
conversion in order to compensate correctly for the
varying obliquity of the ecliptic over time.
The right ascension and declination are returned
as a two-element Array in that order.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  astro.ecliptoeq = <span class="keyword">function</span>(jd, Lambda, Beta) {
    <span class="keyword">var</span> eps, Ra, Dec;</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>Obliquity of the ecliptic</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    eps = <span class="keyword">this</span>.dtr(<span class="keyword">this</span>.obliqeq(jd));
    Ra = <span class="keyword">this</span>.rtd(Math.atan2((Math.cos(eps) * Math.sin(<span class="keyword">this</span>.dtr(Lambda)) -
        (Math.tan(<span class="keyword">this</span>.dtr(Beta)) * Math.sin(eps))),
      Math.cos(<span class="keyword">this</span>.dtr(Lambda))));
    Ra = <span class="keyword">this</span>.fixangle(<span class="keyword">this</span>.rtd(Math.atan2((Math.cos(eps) * Math.sin(<span class="keyword">this</span>.dtr(Lambda)) -
        (Math.tan(<span class="keyword">this</span>.dtr(Beta)) * Math.sin(eps))),
      Math.cos(<span class="keyword">this</span>.dtr(Lambda)))));
    Dec = <span class="keyword">this</span>.rtd(Math.asin((Math.sin(eps) * Math.sin(<span class="keyword">this</span>.dtr(Lambda)) * Math.cos(<span class="keyword">this</span>.dtr(Beta))) +
      (Math.sin(<span class="keyword">this</span>.dtr(Beta)) * Math.cos(eps))));

    <span class="keyword">return</span> [Ra, Dec];
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>Determine the difference, in seconds, between
Dynamical time and Universal time.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  astro.deltat = <span class="keyword">function</span>(year) {
    <span class="keyword">var</span> dt, f, i, t;

    <span class="keyword">if</span> ((year &gt;= <span class="number">1620</span>) &amp;&amp; (year &lt;= <span class="number">2000</span>)) {
      i = Math.floor((year - <span class="number">1620</span>) / <span class="number">2</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>Fractional part of year</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      f = ((year - <span class="number">1620</span>) / <span class="number">2</span>) - i;
      dt = <span class="keyword">this</span>.constants.DELTA_T_TAB[i] + ((<span class="keyword">this</span>.constants.DELTA_T_TAB[i + <span class="number">1</span>] - <span class="keyword">this</span>.constants.DELTA_T_TAB[i]) * f);
    } <span class="keyword">else</span> {
      t = (year - <span class="number">2000</span>) / <span class="number">100</span>;
      <span class="keyword">if</span> (year &lt; <span class="number">948</span>) {
        dt = <span class="number">2177</span> + (<span class="number">497</span> * t) + (<span class="number">44.1</span> * t * t);
      } <span class="keyword">else</span> {
        dt = <span class="number">102</span> + (<span class="number">102</span> * t) + (<span class="number">25.3</span> * t * t);
        <span class="keyword">if</span> ((year &gt; <span class="number">2000</span>) &amp;&amp; (year &lt; <span class="number">2100</span>)) {
          dt += <span class="number">0.37</span> * (year - <span class="number">2100</span>);
        }
      }
    }

    <span class="keyword">return</span> dt;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>Determine the Julian Ephemeris Day of an
equinox or solstice. The <code>which</code> argument
selects the item to be computed:</p>
<p><strong>0</strong> - March equinox<br><strong>1</strong> - June solstice<br><strong>2</strong> - September equinox<br><strong>3</strong> - December solstice</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  astro.equinox = <span class="keyword">function</span>(year, which) {
    <span class="keyword">var</span> deltaL, i, j, JDE0, JDE, JDE0tab, S, T, W, Y;</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>Initialise terms for mean equinox and solstices. We
have two sets: one for years prior to 1000 and a second
for subsequent years.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (year &lt; <span class="number">1000</span>) {
      JDE0tab = <span class="keyword">this</span>.constants.JDE0_TAB_1000;
      Y = year / <span class="number">1000</span>;
    } <span class="keyword">else</span> {
      JDE0tab = <span class="keyword">this</span>.constants.JDE0_TAB_2000;
      Y = (year - <span class="number">2000</span>) / <span class="number">1000</span>;
    }

    JDE0 = JDE0tab[which][<span class="number">0</span>] +
      (JDE0tab[which][<span class="number">1</span>] * Y) +
      (JDE0tab[which][<span class="number">2</span>] * Y * Y) +
      (JDE0tab[which][<span class="number">3</span>] * Y * Y * Y) +
      (JDE0tab[which][<span class="number">4</span>] * Y * Y * Y * Y);

    T      = (JDE0 - <span class="number">2451545.0</span>) / <span class="number">36525</span>;
    W      = (<span class="number">35999.373</span> * T) - <span class="number">2.47</span>;
    deltaL = <span class="number">1</span> + (<span class="number">0.0334</span> * <span class="keyword">this</span>.dcos(W)) + (<span class="number">0.0007</span> * <span class="keyword">this</span>.dcos(<span class="number">2</span> * W));</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>Sum the periodic terms for time T</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    S = <span class="number">0</span>;
    <span class="keyword">for</span> (i = j = <span class="number">0</span>; i &lt; <span class="number">24</span>; i++) {
      S += <span class="keyword">this</span>.constants.EQUINOX_P_TERMS[j] * <span class="keyword">this</span>.dcos(<span class="keyword">this</span>.constants.EQUINOX_P_TERMS[j + <span class="number">1</span>] + (<span class="keyword">this</span>.constants.EQUINOX_P_TERMS[j + <span class="number">2</span>] * T));
      j += <span class="number">3</span>;
    }

    JDE = JDE0 + ((S * <span class="number">0.00001</span>) / deltaL);

    <span class="keyword">return</span> JDE;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>Position of the Sun. Please see the comments
on the return statement at the end of this function
which describe the array it returns. We return
intermediate values because they are useful in a
variety of other contexts.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  astro.sunpos = <span class="keyword">function</span>(jd) {
    <span class="keyword">var</span> T, T2, L0, M, e, C, sunLong, sunAnomaly, sunR,
      Omega, Lambda, epsilon, epsilon0, Alpha, Delta,
      AlphaApp, DeltaApp;

    T  = (jd - <span class="keyword">this</span>.constants.J2000) / <span class="keyword">this</span>.constants.JULIAN_CENTURY;
    T2 = T * T;
    L0 = <span class="number">280.46646</span> + (<span class="number">36000.76983</span> * T) + (<span class="number">0.0003032</span> * T2);
    L0 = <span class="keyword">this</span>.fixangle(L0);
    M  = <span class="number">357.52911</span> + (<span class="number">35999.05029</span> * T) + (-<span class="number">0.0001537</span> * T2);
    M  = <span class="keyword">this</span>.fixangle(M);
    e  = <span class="number">0.016708634</span> + (-<span class="number">0.000042037</span> * T) + (-<span class="number">0.0000001267</span> * T2);
    C  = ((<span class="number">1.914602</span> + (-<span class="number">0.004817</span> * T) + (-<span class="number">0.000014</span> * T2)) * <span class="keyword">this</span>.dsin(M)) +
         ((<span class="number">0.019993</span> - (<span class="number">0.000101</span> * T)) * <span class="keyword">this</span>.dsin(<span class="number">2</span> * M)) +
         (<span class="number">0.000289</span> * <span class="keyword">this</span>.dsin(<span class="number">3</span> * M));

    sunLong    = L0 + C;
    sunAnomaly = M + C;
    sunR       = (<span class="number">1.000001018</span> * (<span class="number">1</span> - (e * e))) / (<span class="number">1</span> + (e * <span class="keyword">this</span>.dcos(sunAnomaly)));
    Omega      = <span class="number">125.04</span> - (<span class="number">1934.136</span> * T);
    Lambda     = sunLong + (-<span class="number">0.00569</span>) + (-<span class="number">0.00478</span> * <span class="keyword">this</span>.dsin(Omega));
    epsilon0   = <span class="keyword">this</span>.obliqeq(jd);
    epsilon    = epsilon0 + (<span class="number">0.00256</span> * <span class="keyword">this</span>.dcos(Omega));
    Alpha      = <span class="keyword">this</span>.rtd(Math.atan2(<span class="keyword">this</span>.dcos(epsilon0) * <span class="keyword">this</span>.dsin(sunLong), <span class="keyword">this</span>.dcos(sunLong)));
    Alpha      = <span class="keyword">this</span>.fixangle(Alpha);
    Delta      = <span class="keyword">this</span>.rtd(Math.asin(<span class="keyword">this</span>.dsin(epsilon0) * <span class="keyword">this</span>.dsin(sunLong)));
    AlphaApp   = <span class="keyword">this</span>.rtd(Math.atan2(<span class="keyword">this</span>.dcos(epsilon) * <span class="keyword">this</span>.dsin(Lambda), <span class="keyword">this</span>.dcos(Lambda)));
    AlphaApp   = <span class="keyword">this</span>.fixangle(AlphaApp);
    DeltaApp   = <span class="keyword">this</span>.rtd(Math.asin(<span class="keyword">this</span>.dsin(epsilon) * <span class="keyword">this</span>.dsin(Lambda)));</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>Angular quantities are expressed in decimal degrees</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">return</span> [</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p><strong>[0]</strong> Geometric mean longitude of the Sun</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      L0,</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p><strong>[1]</strong> Mean anomaly of the Sun</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      M,</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p><strong>[2]</strong> Eccentricity of the Earth&#39;s orbit</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      e,</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p><strong>[3]</strong> Sun&#39;s equation of the Centre</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      C,</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p><strong>[4]</strong> Sun&#39;s true longitude</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      sunLong,</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p><strong>[5]</strong> Sun&#39;s true anomaly</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      sunAnomaly,</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p><strong>[6]</strong> Sun&#39;s radius vector in AU</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      sunR,</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p><strong>[7]</strong> Sun&#39;s apparent longitude at true equinox of the date</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      Lambda,</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p><strong>[8]</strong> Sun&#39;s true right ascension</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      Alpha,</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p><strong>[9]</strong> Sun&#39;s true declination</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      Delta,</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p><strong>[10]</strong> Sun&#39;s apparent right ascension</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      AlphaApp,</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p><strong>[11]</strong> Sun&#39;s apparent declination</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      DeltaApp
    ];
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>Compute equation of time for a given moment.
Returns the equation of time as a fraction of
a day.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  astro.equationOfTime = <span class="keyword">function</span>(jd) {
    <span class="keyword">var</span> alpha, deltaPsi, E, epsilon, L0, tau;

    tau = (jd - <span class="keyword">this</span>.constants.J2000) / <span class="keyword">this</span>.constants.JULIAN_MILLENIUM;
    L0 = <span class="number">280.4664567</span> + (<span class="number">360007.6982779</span> * tau) +
         (<span class="number">0.03032028</span> * tau * tau) +
         ((tau * tau * tau) / <span class="number">49931</span>) +
         (-((tau * tau * tau * tau) / <span class="number">15300</span>)) +
         (-((tau * tau * tau * tau * tau) / <span class="number">2000000</span>));

    L0       = <span class="keyword">this</span>.fixangle(L0);
    alpha    = <span class="keyword">this</span>.sunpos(jd)[<span class="number">10</span>];
    deltaPsi = <span class="keyword">this</span>.nutation(jd)[<span class="number">0</span>];
    epsilon  = <span class="keyword">this</span>.obliqeq(jd) + <span class="keyword">this</span>.nutation(jd)[<span class="number">1</span>];
    E        = L0 + (-<span class="number">0.0057183</span>) + (-alpha) + (deltaPsi * <span class="keyword">this</span>.dcos(epsilon));
    E        = E - <span class="number">20.0</span> * (Math.floor(E / <span class="number">20.0</span>));
    E        = E / (<span class="number">24</span> * <span class="number">60</span>);

    <span class="keyword">return</span> E;
  }

  <span class="keyword">return</span> exports;
}(Ephemerides || {}));</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
